@host=http://localhost:3000/
###
# @name shouldHaveAddressAndAmount
POST /api/stake/psbt

?? status == 400


###
# @name amountShouldBeInteger
POST /api/stake/psbt
Content-Type: application/json

{
    "address": "{{address}}",
    "amount": 10.5
}

?? status == 400
#?? body.fieldErrors.amount contains "Expected integer"

###
# @name shouldSendAPSBT
@address=bc1pkkfwul773ujrlr5f5wq6auzxpw4uals4anj4z95k0nf0qx7s5vpq4nrtw7
@amount=52
@stakedAmount=100
@payer=bc1qsyfswruvyta7ly85r2kw3yuex28t0kfps0zmrs
POST /api/stake
Content-Type: application/json

{
    "sender": {
        "address": "bc1pkkfwul773ujrlr5f5wq6auzxpw4uals4anj4z95k0nf0qx7s5vpq4nrtw7",
        "public": "3272a1d4270a26063062112679d2b4f631047fea1a31f544a7e2aaef21b81362"
    },
    "payer": {
        "address": "bc1qsyfswruvyta7ly85r2kw3yuex28t0kfps0zmrs",
        "public": "0231dc36b9ca2d95a8caf5f6a4955c320add5e9eed68a390219aa7428cc1e181ec"
    },
    "amount": 52,
    "stakedAmount": 100
}

?? status == 200
?? body psbt exists


{{
    const bitcoin = require('bitcoinjs-lib');
    const { equal } = require('assert');

    //test('should be a valid PSBT', () => {
    //    debugger
    //    const psbt = bitcoin.Psbt.fromHex(response.parsedBody.psbt);
    //    equal(psbt.isValid(), true);
    //});
}}

@host=http://localhost:3000/
###
# @name shouldNotHaveEmptyBody
POST /api/stake/confirm
Content-Type: application/json
?? status == 400


###
# @name shouldRespond
@psbt=cHNidP8BAP04AQIAAAADfyuSbMfGqYkiHUWRcZ7qMV6ZqPI+j4xgv2WszVP6Wf4BAAAAAP////+2zjVEP30u8hDdbEvarXlUVNT85xHcREzBleIKoDnZvgEAAAAA/////7bONUQ/fS7yEN1sS9qteVRU1PznEdxETMGV4gqgOdm+BAAAAAD/////BQAAAAAAAAAAFmpdExYDAMW4M+ELvJsBAdeKAuACCgIiAgAAAAAAACJRILWS7n/ejyQ/jomjga7wRgurzv4V7OVRFpZ80vAb0KMCIgIAAAAAAAAiUSC1ku5/3o8kP46Jo4Gu8EYLq87+FezlURaWfNLwG9CjAiICAAAAAAAAFgAUtDeyG104fHmPzoxwa8f5SBPYlwq8KAAAAAAAABYAFIETBw+MIvvvkPQarOiTmTKOt9khAAAAAAABAR8iAgAAAAAAABYAFLQ3shtdOHx5j86McGvH+UgT2JcKAAEBKyICAAAAAAAAIlEgtZLuf96PJD+OiaOBrvBGC6vO/hXs5VEWlnzS8BvQowIBCEIBQB+zk+mdoRX/Gm8hXoqexZvWrsj4JEzNT2sHj+9ctYXVWub6172o0DQWHnRjxV8a6PnDY0Tua75ciMSWL01Uu18AAQEfIDQAAAAAAAAWABSBEwcPjCL775D0Gqzok5kyjrfZIQEIbAJIMEUCIQCWtxUAxfMuXfEMcxqOCGemvvp5suNyeTDPrxX860vbfwIgAh8L546JxsQ8aQ7HKRUw8464/121W5JDTwl4EoYYgTMBIQIx3Da5yi2VqMr19qSVXDIK3V6e7WijkCGap0KMweGB7AAAAAAAAA==
@address=bc1pkkfwul773ujrlr5f5wq6auzxpw4uals4anj4z95k0nf0qx7s5vpq4nrtw7
@runeAmount=1000
@returnRuneId=sLIQ
POST /api/stake/confirm
Content-Type: application/json

{
    "uuid": "{{uuid}}",
    "psbt": "{{psbt}}",

}

